{% extends "layout.html" %}

{% block title %}
    Video Stream
{% endblock %}

{% block main %}

<!-- All cameras from first index to last in cameras-->
<div class="grid">
 {% for camera_number in range(0, camera_list)%}
   
        <!-- List id is the camera number from the for loop-->
        <div class="contain">
        <div class="topnav">
            <span>Camera {{camera_number}}</span>
            <button type="button" onclick="removeCamera('{{camera_number}}')">
                <i class="material-icons" style="color: #fefefd;">delete</i>
            </button>  
        <button type="button" onclick="startRecording('{{ camera_number }}')" id="record">
            <i class="material-icons" style="color: #fefefd;">radio_button_checked</i>
        </button> 
        <button type="button" onclick="stopRecording('{{ camera_number }}')" id="stop">
            <i class="material-icons" style="color: #fefefd;">stop_circle</i>
        </button>
        </div>    
        <img src="{{ url_for('video_feed', list_id = camera_number) }}" class="grid-img" width="320" height="240">
        </div>

 {%endfor%}  
</div> 

  <script>
    // Camera_id argument that we'll process into a camera channel in the python code
    function startRecording(camera_id) 
    {
        console.log(`Starting recording for camera ${camera_id}`);
        // Post request to /start_rec, passing the value of camera_id into the url. We'll collect that inside our python function for recording and process it into a camera channel
        fetch(`/start_rec/${camera_id}`, {method:"POST"});

    }
    // Camera_id argument that we'll process into a camera channel in the python code 
    function stopRecording(camera_id)
    {
        console.log(`Stopping recording for camera ${camera_id}`);
        // Post request to /stop_rec, passing the value of camera_id into the url. We'll collect that inside our python function for stop-recording and process it into a camera channel
        fetch(`/stop_rec/${camera_id}`, {method: "POST"});
    }

    function removeCamera(camera_id)
    {
        console.log(`Removing camera ${camera_id}`);
        fetch(`/remove/${camera_id}`, {method: "POST"});

    }
    


  </script>

  {% endblock %}  
